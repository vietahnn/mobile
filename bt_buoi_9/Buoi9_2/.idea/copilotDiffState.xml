<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/HUONG_DAN_FIREBASE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/HUONG_DAN_FIREBASE.md" />
              <option name="updatedContent" value="# Hướng Dẫn Cấu Hình Firebase cho Dự Án Buoi9_CN&#10;&#10;## Đã Hoàn Thành ✓&#10;&#10;Dự án đã được chuyển đổi từ Room Database sang Firebase Realtime Database thành công!&#10;&#10;## Các File Cần Xóa&#10;&#10;Các file sau đây không còn cần thiết và có thể xóa:&#10;&#10;1. `app/src/main/java/com/example/buoi9_cn/data/dao/LichDao.kt`&#10;2. `app/src/main/java/com/example/buoi9_cn/data/database/LichDatabase.kt`&#10;&#10;**Cách xóa:**&#10;- Trong Android Studio, click chuột phải vào file → Delete&#10;- Hoặc xóa thủ công trong File Explorer&#10;&#10;## Các Thay Đổi Đã Thực Hiện&#10;&#10;### 1. Dependencies (build.gradle.kts)&#10;✓ Đã xóa tất cả Room dependencies&#10;✓ Đã xóa KSP và KAPT plugins&#10;✓ Đã giữ lại Firebase dependencies&#10;&#10;### 2. Model (Lich.kt)&#10;✓ Xóa Room annotations (@Entity, @PrimaryKey)&#10;✓ Thay đổi `id` từ Int sang String&#10;✓ Thêm no-argument constructor cho Firebase&#10;&#10;### 3. Repository (LichRepository.kt)&#10;✓ Thay thế hoàn toàn bằng Firebase Realtime Database&#10;✓ Sử dụng Firebase DatabaseReference&#10;✓ Tự động đồng bộ dữ liệu real-time&#10;&#10;### 4. ViewModel (LichViewModel.kt)&#10;✓ Không còn extends AndroidViewModel&#10;✓ Sử dụng Firebase repository mới&#10;✓ Xóa ViewModelScope (không cần với Firebase)&#10;&#10;### 5. Utilities &amp; UI&#10;✓ BundleHelper: Cập nhật để dùng String ID&#10;✓ NotificationReceiver: Cập nhật để dùng String ID&#10;✓ MainActivity: Cập nhật notification scheduling&#10;&#10;## Cấu Hình Firebase&#10;&#10;### Bước 1: Kiểm Tra File google-services.json&#10;File này phải có tại: `app/google-services.json`&#10;&#10;Nếu chưa có, tải về từ Firebase Console:&#10;1. Vào https://console.firebase.google.com&#10;2. Chọn project của bạn&#10;3. Project Settings → General&#10;4. Scroll xuống phần &quot;Your apps&quot;&#10;5. Tải &quot;google-services.json&quot;&#10;6. Copy vào thư mục `app/`&#10;&#10;### Bước 2: Cấu Hình Firebase Realtime Database&#10;&#10;1. Vào Firebase Console&#10;2. Chọn &quot;Realtime Database&quot; từ menu bên trái&#10;3. Click &quot;Create Database&quot;&#10;4. Chọn location (ví dụ: asia-southeast1)&#10;5. Chọn &quot;Start in test mode&quot; (cho phát triển)&#10;&#10;### Bước 3: Cấu Hình Rules&#10;&#10;Trong Firebase Console → Realtime Database → Rules, dán code sau:&#10;&#10;**Cho phát triển/test (KHÔNG dùng cho production):**&#10;```json&#10;{&#10;  &quot;rules&quot;: {&#10;    &quot;lich&quot;: {&#10;      &quot;.read&quot;: true,&#10;      &quot;.write&quot;: true&#10;    }&#10;  }&#10;}&#10;```&#10;&#10;**Cho production (yêu cầu authentication):**&#10;```json&#10;{&#10;  &quot;rules&quot;: {&#10;    &quot;lich&quot;: {&#10;      &quot;.read&quot;: &quot;auth != null&quot;,&#10;      &quot;.write&quot;: &quot;auth != null&quot;&#10;    }&#10;  }&#10;}&#10;```&#10;&#10;## Cấu Trúc Dữ Liệu Trên Firebase&#10;&#10;```&#10;your-project-name/&#10;  └── lich/&#10;      ├── -NxXxXxXxXxXxXxXx/&#10;      │   ├── id: &quot;-NxXxXxXxXxXxXxXx&quot;&#10;      │   ├── hoVaTen: &quot;Nguyễn Văn A&quot;&#10;      │   ├── ngayGio: 1734480000000&#10;      │   ├── noiDung: &quot;Họp dự án phát triển app&quot;&#10;      │   └── linkAnh: &quot;https://i.pravatar.cc/150?img=1&quot;&#10;      │&#10;      └── -NyYyYyYyYyYyYyYy/&#10;          ├── id: &quot;-NyYyYyYyYyYyYyYy&quot;&#10;          ├── hoVaTen: &quot;Trần Thị B&quot;&#10;          ├── ngayGio: 1734566400000&#10;          ├── noiDung: &quot;Gặp khách hàng&quot;&#10;          └── linkAnh: &quot;https://i.pravatar.cc/150?img=5&quot;&#10;```&#10;&#10;## Chạy Dự Án&#10;&#10;### Bước 1: Xóa các file Room&#10;```&#10;Xóa thủ công hoặc dùng Android Studio&#10;```&#10;&#10;### Bước 2: Clean Project&#10;```&#10;Build → Clean Project&#10;```&#10;&#10;### Bước 3: Rebuild Project&#10;```&#10;Build → Rebuild Project&#10;```&#10;&#10;### Bước 4: Sync Gradle&#10;```&#10;File → Sync Project with Gradle Files&#10;```&#10;&#10;### Bước 5: Run App&#10;```&#10;Run → Run 'app'&#10;```&#10;&#10;## Tính Năng Mới Với Firebase&#10;&#10;### ✅ Real-time Sync&#10;- Dữ liệu tự động đồng bộ giữa các thiết bị&#10;- Không cần refresh để xem dữ liệu mới&#10;&#10;### ✅ Cloud Storage&#10;- Dữ liệu lưu trên cloud&#10;- Không mất dữ liệu khi gỡ app&#10;&#10;### ✅ Multi-device Support&#10;- Dùng cùng tài khoản trên nhiều thiết bị&#10;- Dữ liệu đồng bộ tự động&#10;&#10;### ✅ Offline Support (tùy chọn)&#10;Để bật offline support, thêm vào Application class:&#10;```kotlin&#10;FirebaseDatabase.getInstance().setPersistenceEnabled(true)&#10;```&#10;&#10;## Kiểm Tra Dữ Liệu&#10;&#10;### Trong Firebase Console:&#10;1. Vào Realtime Database&#10;2. Xem tab &quot;Data&quot;&#10;3. Sẽ thấy node &quot;lich&quot; với tất cả lịch hẹn&#10;&#10;### Trong App:&#10;1. Mở app&#10;2. Thêm lịch hẹn mới&#10;3. Kiểm tra Firebase Console → dữ liệu xuất hiện ngay lập tức&#10;&#10;## Troubleshooting&#10;&#10;### Lỗi &quot;Database reference not found&quot;&#10;- Kiểm tra file google-services.json đã có chưa&#10;- Sync Gradle lại&#10;- Rebuild project&#10;&#10;### Lỗi &quot;Permission denied&quot;&#10;- Kiểm tra Firebase Rules đã cấu hình chưa&#10;- Dùng test mode để phát triển&#10;&#10;### Lỗi &quot;No authentication&quot;&#10;- Nếu dùng rules yêu cầu auth, cần implement Firebase Authentication&#10;- Hoặc dùng test mode rules&#10;&#10;### Dữ liệu không sync&#10;- Kiểm tra internet connection&#10;- Kiểm tra Firebase Console có dữ liệu không&#10;- Xem Logcat để tìm lỗi&#10;&#10;## Các Bước Tiếp Theo (Tùy Chọn)&#10;&#10;### 1. Thêm Firebase Authentication&#10;```kotlin&#10;// Trong build.gradle.kts&#10;implementation(&quot;com.google.firebase:firebase-auth-ktx&quot;)&#10;```&#10;&#10;### 2. Thêm Firebase Storage (cho ảnh)&#10;```kotlin&#10;// Thay vì dùng link URL, upload ảnh lên Firebase Storage&#10;implementation(&quot;com.google.firebase:firebase-storage-ktx&quot;)&#10;```&#10;&#10;### 3. Thêm Firebase Cloud Messaging (cho push notifications)&#10;```kotlin&#10;implementation(&quot;com.google.firebase:firebase-messaging-ktx&quot;)&#10;```&#10;&#10;## Liên Hệ &amp; Hỗ Trợ&#10;&#10;Nếu gặp vấn đề, check:&#10;- Firebase Console → Realtime Database&#10;- Logcat trong Android Studio&#10;- Firebase documentation: https://firebase.google.com/docs/database&#10;&#10;## Hoàn Thành! &#10;&#10;App của bạn giờ đã dùng Firebase thay vì Room Database. Chúc bạn phát triển app thành công!&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>